# 消息通知

> 备注：
>
> 在分析需求时发现通知系统内容繁杂且细碎，实现起来工程量比较大
>
> 之后可以根据工程整体的工作量挑选一些比较重要的、有代表性的消息通知进行实现

## 名词定义
- 系统通知：本平台向用户发出的通知
  - 评论通知
  - 分享通知
  - 保存提醒
  - 权限申请（团队外用户）
  - 授权通知
  - 更新通知（实现优先级较低）

- 团队通知：用户团队内部成员间互相收发的通知
  - 加入 / 退出团队申请
  - 成功加入 / 退出团队
  - 权限申请（团队成员）
  - 团队内部通知

- 所有通知页面：展示用户收到的所有通知
- 团队通知页面：展示用户所在团队中收到的通知

## 需求用例

### 1 系统通知

- 共性功能：通过通知浮窗跳转到所有通知页面 / 关闭通知

#### 1.1 评论通知

- 使用者：用户
- 通知内容：文档名称、新评论的内容
- 输入：回复评论的内容 / 删除评论
- 系统响应：跳转到文档评论区 / 关闭通知并返回当前页面
- 前置条件：其他用户对本用户的文档进行评论
- 异常处理：
  - 点击删除评论前，评论者对评论内容有更改

#### 1.2 分享通知

- 使用者：用户
- 通知内容：文档名称、分享者、文档累计分享次数
- 输入：关闭通知
- 系统响应：关闭通知并返回当前界面
- 前置条件：其他用户对本用户的文档进行分享

#### 1.3 保存提醒

- 使用者：用户
- 通知内容：文档名称、提醒用户进行保存
- 输入：保存 / 忽略
- 系统响应：对未保存文档进行保存 / 关闭通知并返回当前页面
- 前置条件：用户在关闭文档时未进行保存
- 异常处理：
  - 用户选择保存时文档已遭到损坏或数据丢失

#### 1.4 权限申请（团队外用户）

- 使用者：用户
- 通知内容：文档名称、申请人、申请权限的内容（查看、修改、分享）
- 输入：授权 / 拒绝
- 系统响应：授予申请者对应权限 / 关闭通知并返回当前页面
- 前置条件：其他用户就文档权限提出申请
- 详细步骤：
  - 其他用户对本用户的文档的权限提出申请
  - 用户选择：授权 / 拒绝
  - 系统向申请者返回对应通知
- 异常处理：
  - 申请者在用户决定是否授权之前撤销了权限申请

#### 1.5 授权通知

- 使用者：用户
- 通知内容：文档名称、文档所有者、授权情况
- 输入：关闭通知
- 系统响应：关闭通知并返回当前页面
- 前置条件：文档所有者对本用户权限做出修改
- 扩展点：对于新增加权限可以直接在通知页面进行操作，如分享、评论等。

#### 1.6 更新通知（实现优先级较低）

- 使用者： 用户
- 通知内容：新系统版本、版本特性、发布时间
- 输入： 立即更新
- 系统相应：进行更新操作
- 前置条件：有新的版本发布
- 异常：
  - 版本不兼容
  - 安装包出错
  - ……


### 2 团队通知
- 共性功能：通过通知浮窗跳转到所有通知页面或团队通知页面

#### 2.1 加入 / 退出团队申请

- 使用者：团队管理员
- 通知内容：申请人、申请内容（加入 / 退出）
- 输入：同意 / 拒绝 / 成员管理
- 系统相应：若管理员同意加入申请，则将新用户加入团队 / 若管理员同意退出申请，则将该团队成员移出团队 / 跳转到团队成员管理界面
- 前置条件：其他用户申请加入本团队 / 团队成员申请退出本团队

#### 2.2 成功加入 / 退出团队

- 使用者：团队成员
- 通知内容：团队信息、操作内容（加入 / 退出）
- 输入：关闭通知
- 系统相应：关闭通知并返回当前页面
- 前置条件：团队管理员同意本团队成员加入 / 退出本团队

#### 2.3 权限申请（团队成员）

- 同 1.4

#### 2.4 团队内部通知

- 使用者：团队成员
- 通知内容：团队成员在团队内发布的消息
- 输入：关闭通知
- 系统响应：关闭通知并返回当前页面
- 前置条件：团队成员面向团队部分成员或全体成员发布消息
- 扩展点：团队成员可以引用某篇文档发送消息，接受到消息的成员可以直接跳转到该文档

### 3 所有通知页面

- 使用者：用户
- 页面内容：全部通知列表
  - 通知内容
  - 通知时间
  - 通知发出方（系统 / 用户）
  - 是否已读
- 输入：选择通知 / 全部已读 / 全部删除
- 系统响应：用户选择通知后进行已读或删除操作 / 将全部通知设置为已读状态 / 删除全部通知

### 4 团队通知页面

- 使用者：团队成员
- 页面内容：团队内部通知列表 / 团队成员
- 输入：选择通知 / 全部已读 / 全部删除
- 系统响应：用户选择通知后进行已读或删除操作 / 将全部通知设置为已读状态 / 删除全部通知

### 5 发布团队通知

- 使用者：团队成员
- 输入：通知内容、发送对象、引用的文档
- 系统响应：在发送对象的页面中弹出通知
- 详细步骤：
  - 团队成员进入发送通知界面
  - 选择要发送给的对象
  - 选择要引用的文档
  - 输入通知内容
  - 确认是否发送
  - 系统向发送对象推送通知
- 扩展点：
  - 定时发送通知
